# Telegram Shell Bot

This is a fork of  https://github.com/vicalloy/telegram-shell-bot.git to implement his whitelist and blacklist features until the original repo is patched. 

## Requirments

- Python 3.6+
- Pipenv

## Install
1. Create a bot and get token from [BotFather bot](https://telegram.me/BotFather)
1. Clone `Telegram Shell Bot`

        git clone https://github.com/memwix/telegram-shell-bot.git
        
1. Copy `settings.py.sample` to `settings.py` and config it.
    - `TOKEN` Bot token generated by BotFather
    - `ENABLED_USERS` Your telegram user id. Only enabled users can use this bot.  
    - `CMD_WHITE_LIST` Only command in `CMD_WHITE_LIST` can be executed. Setting an option here will invalidate the need for a black list.
    - `CMD_BLACK_LIST` Ignore command in `CMD_BLACK_LIST`.
    - `CMD_BLACK_CHARS` Ignore command contain char in `CMD_BLACK_LIST`.
    - `PROXY_URL` Proxy url.
    - `SC_MENU_ITEM_ROWS` Command shortcut config.
    - `ONLY_SHORTCUT_CMD` Run command by shortcut menu, other command will ignore.

1. Create a virtual environment and install required packages
        
        pipenv --python 3
        pipenv install -d --skip-lock
        pipenv shell

## Run

```
pipenv shell
python bot.py
```

## Usage

1. Take to bot, every input will tread as a shell command.
1. `/tasks` show all running tasks
1. `/kill` kill running task
1. `/sudo_login` call sudo
1. `/script` run scripts in ./scripts directory
1. The bot send first 3sec output for every command, you can add `oa` in command to send all output. ex:
        
        oa;ping google.com
        /script oa;demo.py
